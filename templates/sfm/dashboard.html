{% extends "base.html" %}
{% load i18n %}
{% block content %}
<div class="row">
    <div class="col-sm-12">
        <div class="jumbotron">
            <form action='{% url 'search' %}' method='GET'>
                {% comment %}Translators: Please keep the "strong" tags, which display the numbers in bold{% endcomment %}
                <p>{% trans "Investigate <strong>police</strong> and <strong>military commanders</strong>, <strong>units</strong> and <strong>areas of operation</strong>" %}</p>
                <div class="row">
                    <div class="col-xs-12">
                        <div class="input-group input-group-lg">
                            <input type="text" class="form-control" placeholder="{% trans 'Enter a person or unit name, location or keyword...' %}" name="q" id="q" autofocus>
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="submit"><i class='fa fa-search'></i> {% trans "Search" %}</button>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <p class="small"><strong><i class="fa fa-fw fa-search"></i> {% trans "I'm looking for..." %}</strong></p>
                    </div>
                    <div class="col-xs-12 col-sm-6">
                        <div class="entities btn-group" data-toggle="buttons">
                            <label class="btn btn-default">
                                <input type="checkbox" autocomplete="off" name='entity_type' value='Person' />
                                <i class="fa fa-fw fa-user"></i> {% trans "Personnel" %}
                            </label>
                            <label class="btn btn-default">
                                <input type="checkbox" name="entity_type" value="Organization" />
                                <i class="fa fa-fw fa-users"></i> {% trans "Units" %}
                            </label>
                            <label class="btn btn-default">
                                <input type="checkbox" name="entity_type" value="Violation" />
                                <i class="fa fa-fw fa-exclamation-triangle"></i> {% trans "Incidents" %}
                            </label>
                            <label class="btn btn-default active">
                                <input type="checkbox" name="" value="" checked>
                                <i class="fa fa-fw fa-thumbs-up"></i> {% trans "Everything" %}
                            </label>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6">
                        <p class="small">
                        {% comment %}Translators: 'on' is followed by the countries that we currently track{% endcomment %}
                            {% trans "Currently includes data on" %}
                            <a href="{% url 'search' %}?selected_facets=country_ss_fct_exact:Egypt">{% trans "Egypt" %}</a>,
                            <a href="{% url 'search' %}?selected_facets=country_ss_fct_exact:Mexico">{% trans "Mexico" %}</a>,
                            {% trans "and" %}
                            <a href="{% url 'search' %}?selected_facets=country_ss_fct_exact:Nigeria">{% trans "Nigeria" %}</a>
                        </p>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<hr />
<div class="row">
    <div class="col-sm-12">
        <div class="panel panel-default" style="min-height:150px">
            <div class="panel-heading">
                <h4>{% trans "<strong>What is</strong> WhoWasInCommand?" %}</h4>
            </div>
            <div class="panel-body">
                <p>{% trans "WhoWasInCommand answers key questions about the structure, behaviour and people in charge of security forces like the police and army:" %}</p>
                <ul>
                    <li>{% trans "Who is in charge of the specialized anti-riot police unit?" %}</li>
                    <li>{% trans "What army unit has jurisdiction over what areas and for how long?" %}</li>
                    <li>{% trans "Where did this commander previously serve, and where did they go next?" %}</li>
                    <li>{% trans "When was a particular police unit based in a specific city?" %}</li>
                    <li>{% trans "What allegations have civil society groups made against a unit or commander?" %}</li>
                </ul>

                <p>{% trans "WhoWasinCommand presents data from thousands of public sources to help human rights researchers, investigative journalists and anyone who wants security forces to be more accountable." %}</p>
                <p><a href="{% url 'about' %}">{% trans "Learn more" %} <i class="fa fa-fw fa-arrow-right"></i></a>
            </div>
        </div>
    </div>
</div>

{% endblock %}
{% block extra_js %}
<script>

    $('document').ready(function() {

        // Autofocus input on older browsers
        if (!("autofocus" in document.createElement("input"))) {
            $('#q').focus();
        }

        // Make buttons mutually exclusive
        $('.entities label').click(function() {
            // If this button is not checked, uncheck all its cousins while
            // selecting it
            if (!$(this).find('input').is(':checked')) {
                console.log('child is checked');
                var $nieces = $(this).siblings().children();
                $nieces.each(function() {
                    if ($(this).is(':checked')) {
                        $(this).removeAttr('checked');
                        $(this).parent().removeClass('active');
                    }
                });
            }
        });
    });
</script>
{% endblock %}
